<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="gyroscope=(), accelerometer=(), interest-cohort=()">
    <title>超级贪吃蛇 - 经典小游戏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 顶部导航 -->
    <header class="header">
        <div class="header-content">
            <div class="logo">超级贪吃蛇</div>
            <div class="nav-buttons">
                <div class="nav-button-dropdown">
                    <button class="nav-button settings">设置</button>
                    <div class="dropdown-content">
                        <a href="#" class="dropdown-item" onclick="gameManager.toggleSound()">声音: 开</a>
                        <a href="#" class="dropdown-item" onclick="gameManager.toggleMusic()">音乐: 开</a>
                        <a href="#" class="dropdown-item" onclick="gameManager.toggleFullscreen()">全屏模式</a>
                    </div>
                </div>
                <div class="nav-button-dropdown">
                    <button class="nav-button language">语言</button>
                    <div class="dropdown-content">
                        <a href="#" class="dropdown-item" onclick="gameManager.changeLanguage('zh')">中文</a>
                        <a href="#" class="dropdown-item" onclick="gameManager.changeLanguage('en')">English</a>
                        <a href="#" class="dropdown-item" onclick="gameManager.changeLanguage('ja')">日本語</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="page-container">
        <!-- 游戏主体区域 -->
        <div class="game-main">
            <h1 class="game-title">超级贪吃蛇</h1>
            <p class="game-description">经典游戏的全新体验 - 带有变身特效和关卡挑战</p>
            
            <!-- 游戏容器 -->
            <div class="game-container">
                <div class="game-info">
                    <div>关卡: <span id="level">1</span></div>
                    <div>分数: <span id="score">0</span></div>
                    <div>最高分: <span id="highScore">0</span></div>
                </div>
                
                <canvas id="gameCanvas" width="400" height="400"></canvas>
                
                <div class="game-controls">
                    <button id="startBtn">开始游戏</button>
                    <button id="pauseBtn">暂停</button>
                </div>
            </div>
        </div>

        <!-- 广告区域 -->
        <div class="ad-container">
            <div id="ad-space">广告位置</div>
        </div>

        <!-- 游戏推荐区域 -->
        <h2 class="section-title">更多好玩的游戏</h2>
        <div class="games-grid">
            <div class="game-card">
                <div class="game-card-icon">T</div>
                <h3>俄罗斯方块</h3>
                <p>经典的俄罗斯方块游戏，考验你的空间思维能力</p>
                <button class="play-button">开始游戏</button>
            </div>
            <!-- 更多游戏卡片 -->
        </div>

        <!-- FAQ部分 -->
        <div class="faq-container">
            <h2 class="faq-title">游戏说明</h2>
            <!-- FAQ内容 -->
        </div>

        <!-- 社交分享 -->
        <div class="social-share">
            <button class="share-button facebook">
                <i class="fab fa-facebook"></i>
                分享到Facebook
            </button>
            <button class="share-button twitter">
                <i class="fab fa-twitter"></i>
                分享到Twitter
            </button>
        </div>
    </div>

    <!-- 底部版权信息 -->
    <footer class="footer">
        <p>© 2024 超级贪吃蛇. All rights reserved.</p>
    </footer>

    <!-- 脚本引用 -->
    <script src="levels.js"></script>
    <script src="game.js"></script>
    <script src="themes.js"></script>
    <script src="gameManager.js"></script>

    <!-- 在 body 末尾，脚本引用之前添加 -->
    <script>
        // 防止 FOUC (Flash of Unstyled Content)
        document.documentElement.style.visibility = 'hidden';
        window.addEventListener('DOMContentLoaded', function() {
            document.documentElement.style.visibility = '';
        });

        window.addEventListener('error', function(e) {
            // 忽略特定的错误
            if (e.message.includes('postMessage') || 
                e.message.includes('Permissions policy')) {
                e.preventDefault();
                return;
            }
            console.error('Game Error:', e);
        });

        // 初始化游戏
        document.addEventListener('DOMContentLoaded', () => {
            try {
                window.gameManager = new GameManager();
                window.gameManager.init();
            } catch (error) {
                console.error('Game initialization failed:', error);
            }
        });
    </script>
</body>
</html>
